monitor BoundedBuffer {
    // 資源（リングバッファ）
    int N;
    int[] buf;
    int first, last, cnt;
    // 条件変数
    Condition empty;
    Condition full;
    // 初期化
    BoundedBuffer(int n) {
	N = n;
	buf = new int[N];
	first = last = cnt = 0;
    }
